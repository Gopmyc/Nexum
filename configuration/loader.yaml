# Path where all subloader scripts are located
SUBLOADERS_PATH:  "srcs/core/loader/subloaders/"

# Tables to store loaded resources grouped by type
RESSOURCES:       {}

# Defines the order in which resource groups should be loaded
LOAD_PRIORITY:
#  - "CLASSES"
  - "CORE"
#  - "MODULES"

LIBRARIES_PATH: "srcs/core/loader/libraries/"
LIBRARIES:
  ENV_BUILDER:  "env/builder.lua"
  ENV_LOADER:   "env/loader.lua"
  RESSOURCES:   "ressources.lua"
  FINDER:       "finder.lua"
  RUNTIME:      "runtime.lua"

RUNTIME:
  UPDATE: [ BOOTSTRAP, INGRESS, PROCESS, RESOLVE, EGRESS, OBSERVE ]
  DRAW:   [ PREPARE, EMIT, OVERLAY, INSPECT ]

RULES_FILES:
  1:
    FIELD:  ROOT
    TYPE:   table
  2:
    FIELD:  KEY
    TYPE:   string
  3:
    FIELD:  PATH
    TYPE:   string
  4:
    FIELD:  ARGS
    TYPE:   table
  5:
    FIELD:  IS_BINARY
    TYPE:   bool
  6:
    FIELD:  LOAD_SUBFOLDERS
    TYPE:   bool
  7:
    FIELD:  SIDES
    TYPE:   table
  8:
    FIELD:  SIDES.CLIENT
    TYPE:   bool
  9:
    FIELD:  SIDES.SERVER
    TYPE:   bool
  10:
    FIELD:  CAPABILITIES
    TYPE:   table
  11:
    FIELD:  CAPABILITIES.SERVER
    TYPE:   table
  12:
    FIELD:  CAPABILITIES.CLIENT
    TYPE:   table
  13:
    FIELD:  CAPABILITIES.SHARED
    TYPE:   table

SAFE_GLOBAL:
  # ┌───────────┐
  # │ CONSTANTS │
  # └───────────┘
  constants:
    SERVER:   true
    CLIENT:   true
    _VERSION: false
  # ┌───────────┐
  # │ FUNCTIONS │
  # └───────────┘
  functions:
    assert:       true
    error:        true
    ipairs:       true
    next:         true
    pairs:        true
    pcall:        true
    select:       true
    tonumber:     true
    tostring:     true
    type:         true
    unpack:       true
    xpcall:       true
    istable:      true
    isnumber:     true
    isstring:     true
    isbool:       true
    isfunction:   true
    isthread:     true
    isuserdata:   true
    Color:        true
    MsgC:         true
    PrintTable:   true
    print:        true
    setmetatable: true
    getmetatable: false
  # ┌───────────┐
  # │ LIBRARIES │
  # └───────────┘
  libraries:
    math:       full
    string:     full
    table:
      insert:   true
      remove:   true
      sort:     true
      concat:   true
      copy:     true
  # ┌─────────────┐
  # │ NAME-SPACES │
  # └─────────────┘
  namespaces:
    ENV:
      exposed:  true
      readonly: false
  # ┌───────────┐
  # │ EXECUTION │
  # └───────────┘
  execution:
    load:       false
    loadstring: false
    dofile:     false
    loadfile:   false
    setfenv:    false
    getfenv:    false
  # ┌────────────┐
  # │ META-TABLE │
  # └────────────┘
  metatable:
    allow_string_meta: false
    allow_table_meta:  false
  # ┌──────────┐
  # │ FALLBACK │
  # └──────────┘
  fallback:
    global:           false
    error_on_missing: true
